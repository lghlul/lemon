<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.dao.StudentClassDao">

    <insert id="save" parameterType="studentClassDTO" keyProperty="studentClassId" useGeneratedKeys="true">
    insert into studentClass(studentId , teacherClassId , createTime) values(#{studentId} , #{teacherClassId}  , #{createTime})
   </insert>

    <update id="update" parameterType="studentClassDTO">
        update studentClass
        <set>
            <if test="score != null">
                score = #{score}
            </if>
        </set>
        where studentClassId = #{studentClassId}
    </update>


    <select id="get" parameterType="getStudentClassDTO" resultType="studentClass">
        select * from studentClass
        <where>
            <if test="studentId != null">
                and studentId = #{studentId}
            </if>
            <if test="teacherClassId != null">
                and teacherClassId = #{teacherClassId}
            </if>
            <if test="studentClassId != null">
                and studentClassId = #{studentClassId}
            </if>
        </where>
    </select>


    <select id="list" parameterType="listStudentClassDTO" resultType="listStudentClassDTO">
        select a.*,c.className,b.term from studentClass a ,teacherClass b , classInfo c where a.teacherClassId =
        b.teacherClassId and b.classId = c.classId
        <if test="studentId != null">
            and studentId = #{studentId}
        </if>

        <if test="term != null">
            and term = #{term}
        </if>
    </select>
</mapper>
