<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.mapper.StudentClassMapper">

    <insert id="saveStudentClass" parameterType="addStudentClassDTO">
    insert into studentClass(studentNumber , teacherClassId , createTime) values(#{studentNumber} , #{teacherClassId}  , #{createTime})
   </insert>

    <update id="updateStudentClass" parameterType="updateStudentClassDTO">
        update studentClass
        <set>
            <if test="score != null">
                score = #{score}
            </if>
        </set>
        where studentNumber = #{studentNumber} and teacherClassId = #{teacherClassId}
    </update>


    <select id="getStudentClass" parameterType="getStudentClassDTO" resultType="studentClassDO">
        select * from studentClass
        <where>
            <if test="studentNumber != null">
                and studentNumber = #{studentNumber}
            </if>
            <if test="teacherClassId != null">
                and teacherClassId = #{teacherClassId}
            </if>
        </where>
    </select>


    <select id="listStudentClass" parameterType="listStudentClassDTO" resultType="listStudentClassDTO">
        select a.*,c.className,b.term from studentClass a ,teacherClass b , class c where a.teacherClassId =
        b.teacherClassId and b.classNumber = c.classNumber
        <if test="studentNumber != null">
            and studentNumber = #{studentNumber}
        </if>

        <if test="term != null">
            and term = #{term}
        </if>
    </select>
</mapper>
